npv(cashflow, 0.026)
npv(cashflow, 0.26)
npv(cashflow, 0.25)
npv(cashflow, 0)
npv(cashflow, 0.05)
npv(cashflow, 0.1)
npv(cashflow, 0.2)
(1450-990)/990
(1-(1+.1)^(-2))/.1
200/1.74
library(foreign)pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)
pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
summary(pollution)
sum_pol <- summary(pollution)
sum_pol <- as.matrix(summary(pollution))
sum_pol <- as.data.frame(summary(pollution))
head(pollution)
n.var <- ncols(pollution)
n.var <- ncol(pollution)
colMeans(pollution)
sd(pollution)
pollution - values.means
values.means <- colMeans(pollution)
pollution - values.means
? sd
? apply
as.matrix(pollution)
apply(as.matrix(pollution), 1, sd)
apply(as.matrix(pollution), 2, sd)
values.means <- colMeans(pollution)values.sd <- apply(as.matrix(pollution), 2, sd)values.min <- apply(as.matrix(pollution), 2, min)values.max <- apply(as.matrix(pollution), 2, max)
values.means <- colMeans(pollution)values.sd <- apply(as.matrix(pollution), 2, sd)values.min <- apply(as.matrix(pollution), 2, min)values.max <- apply(as.matrix(pollution), 2, max)
library(foreign)pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)
library(foreign)pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)
pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
values.means <- colMeans(pollution)
values.sd <- apply(as.matrix(pollution), 2, sd)
values.min <- apply(as.matrix(pollution), 2, min)
values.max <- apply(as.matrix(pollution), 2, max)
values.means <- colMeans(pollution)values.sd <- apply(as.matrix(pollution), 2, sd)values.min <- apply(as.matrix(pollution), 2, min)values.max <- apply(as.matrix(pollution), 2, max)
source('~/GoogleDrive/CMU/19703/R/lecture_20160203.R', echo=TRUE)
library("foreign")
library("foreign")pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)
pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign);pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta");
pollution <- read.dta('http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta');
library(foreign);pollution <- read.dta('http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta');
library(foreign)pollution <- read.dta('http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta')
? min
? geom_bar
library(ggplot2)
? geom_bar
? rep
rep(1:4, c(2,2,2,2))
rep(c("A", "B", "C", "D"), c(2, 2, 2, 2))
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
df.test
g <- tornado.plot(df.test)
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
df.test
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
? scale_fill_manual
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
df.test
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
df.test
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
df.test
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
? hjust
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
g.1 <- g + geom_vline(xintercept = 10)
g.1
g.1 <- g + geom_hline(yintercept = 10)
g.1
g.1 <- g + geom_hline(yintercept = 4)
g.1
g.1 <- g + geom_vline(xintercept = 1)
g.1
g.1 <- g + geom_vline(xintercept = "A")
g.1
g.1 <- g + geom_vline(xintercept = 1)
g.1
g.1 <- g + geom_vline(xintercept = 1.5)
g.1
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
g.1 <- g.1 + xlab("Age in years") + ylab("Height in inches")
g.1
g <- tornado.plot(df.test)
g <- g + xlab("Age in years") + ylab("Height in inches")
g
g <- tornado.plot(df.test)
g <- g + xlab("Age in years") + theme(axis.title.y=element_blank())
g
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
parameters <- list(disc.rate = c(0.05))
parameters
parameters$num.years <- c(30)
parameters
parameters$ny.population <- 8.4e6
parameters
parameters$vsl <- 9.2e6
parameters
parameters <- list(disc.rate = c(0.05)) # discount rate (% p.y.)
parameters$num.years <- 30 # number of years of analysis
parameters$ny.population <- 8.4e6 # population
parameters$vsl <- 9.2e6 # value of statistical life ($)
parameters
injury.costs <- list()
injury.costs$occupant <- 173711
parameters <- list()
parameters$disc.rate <- 0.05 # discount rate (% p.y.)
parameters$num.years <- 30 # number of years of analysis
parameters$ny.population <- 8.4e6 # population
parameters$vsl <- 9.2e6 # value of statistical life ($)
parameters <- list()
parameters$disc.rate <- 0.05 # discount rate (% p.y.)
parameters$num.years <- 30 # number of years of analysis
parameters$ny.population <- 8.4e6 # population
parameters$vsl <- 9.2e6 # value of statistical life ($)
# source: https://wisqars.cdc.gov:8443/costT/cost_Part1_Intro.jsp
injury.costs <- list()
injury.costs$occupant <- 173711
injury.costs$motorciclyst <- 198668
injury.costs$pedalciclyst <- 187807
injury.costs$pedestrian <- 191813
injury.costs$other <- 139217
injury.costs
bus.age <- data.frame(age = c(4, 9, 20),
number = c(2313, 1296, 1437))
sum(bus.age$age*bus.age$number)
sum(bus.age$age*bus.age$number)/sum(bus.age$number)
sum(bus.age$number)
prob.bus <- bus.age$number/5046
2*prob.bus[1]+7*prob.bus[2]+15*prob.bus[3]
change.commute <- data.frame(outcome = c("MB", "LB", "LW"),
time = c(-235, -55, 30),
margin.error = c(20, 15, 10),
prob = c(0.2, 0.4, 0.4))
change.commute
# Changes in commute times with EM
change.commute <- data.frame(outcome = c("MB", "LB", "LW"),
time = c(-235, -55, 30),
margin.error = c(20, 15, 10),
prob = c(0.2, 0.4, 0.4))
change.commute
818/38
library(dplyr)
library(nycflights13)
dim(flights)
head(flights)
library(dplyr)
library(nycflights13)
dim(flights)
head(flights)
## groupby
by_tailnum <- group_by(flights, tailnum)
dim(by_tailnum)
dim(flights)
by_tailnum
delay <- summarise(by_tailnum,
count = n(),
dist = mean(distance, na.rm = TRUE),
delay = mean(arr_delay, na.rm = TRUE))
delay
destinations <- group_by(flights, dest)
summarise(destinations,
planes = n_distinct(tailnum),
flights = n()
)
daily <- group_by(flights, year, month, day)
(per_day   <- summarise(daily, flights = n()))
(per_month <- summarise(per_day, flights = sum(flights)))
(per_year  <- summarise(per_month, flights = sum(flights)))
? summarise
daily
a1 <- group_by(flights, year, month, day)
a1
a2 <- select(a1, arr_delay, dep_delay)
a2
a3 <- summarise(a2,
arr = mean(arr_delay, na.rm = TRUE),
dep = mean(dep_delay, na.rm = TRUE))
a3
a4 <- filter(a3, arr > 30 | dep > 30)
a4
data_frame(x = 1:100000) %>% class()
? is.equal
? all.equal
? setequal
library(RSQLite)
install.packages("RSQLite")
my_db <- src_sqlite("my_db.sqlite2", create = T)
library(nycflights13)
flights_sqlite <- copy_to(my_db,
flights,
temporary = FALSE,
indexes = list(c("year", "month", "day"),
"carrier", "tailnum"))
flights
? copy_to
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
setwd("~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R")
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
? abline
source('~/decisionchart.R')
elpos
elpos[,1]
unique(elpos[,1])
unique(unique(elpos[,1]))
round(unique(unique(elpos[,1])),2)
unique(round(unique(elpos[,1]),2))
unique(round(unique(elpos[,1]),3))
unique(round(unique(elpos[,1]),5))
x.pos.nodes <- unique(round(unique(elpos[,1]),5))
abline(v = x.pos.nodes[1])
abline(v = x.pos.nodes[2])
abline(v = x.pos.nodes[3])
abline(v = x.pos.nodes[4])
? line
? lines
? text
source('~/decisionchart.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
getwd()
source('~/decisionchart.R')
source('~/decisionchart.R')
source('~/decisionchart.R')
? sapply
getwd()
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
alt3TestTab
1:dim(test.cost)
dim(test.cost)
bayesProbs
size <- 1
bayesProbs$marg.prob[size,-1]
bayesProbs$marg.prob[2,-1]
bayesProbs$marg.prob[21,-1]
bayesProbs$marg.prob[19,-1]
as.numeric(bayesProbs$tMB[1,-1])
as.numeric(bayesProbs$tMB[2,-1])
as.numeric(bayesProbs$tMB[20,-1])
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
alt3TestTab
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/define_alternatives.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/EngEcon.R')
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/define_alternatives.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/define_alternatives.R')
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/define_alternatives.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
? print
? sprintf
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
sum(npv.costs1$value)
sum(npv.costs2$value)
a <- minExpAlt(parameters, buses.data, transit.risks,
bus.emission, emission.costs, injury.costs,
transit.data, congestion.costs, costs.am,
change.commute, weather.data,c(1,0,0),c(0,1,0),c(0,0,1))
a <- minExpAlt(parameters, buses.data, transit.risks,
bus.emission, emission.costs, injury.costs,
transit.data, congestion.costs, costs.am,
change.commute, weather.data, change.commute$prob,
c(1,0,0),c(0,1,0),c(0,0,1))
bayesProbs$marg.prob
bayesProbs$marg.prob[21]
bayesProbs$marg.prob[21,]
a <- minExpAlt(parameters, buses.data, transit.risks,
bus.emission, emission.costs, injury.costs,
transit.data, congestion.costs, costs.am,
change.commute, weather.data, bayesProbs$marg.prob[21,],
c(1,0,0),c(0,1,0),c(0,0,1))
a
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
npv.costs1
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
testNpvs <- sapply(X = 1:dim(test.cost)[1], FUN = testExpValue,
netAlt2(parameters, buses.data, transit.risks,
bus.emission, emission.costs, injury.costs,
transit.data, congestion.costs, costs.am,
change.commute, weather.data, c(1,0,0))
netAlt2(parameters, buses.data, transit.risks,
bus.emission, emission.costs, injury.costs,
transit.data, congestion.costs, costs.am,
change.commute, weather.data, c(0,1,0))
netAlt2(parameters, buses.data, transit.risks,
bus.emission, emission.costs, injury.costs,
transit.data, congestion.costs, costs.am,
change.commute, weather.data, c(0,0,1))
netAlt1(parameters, buses.data, transit.risks,
bus.emission, emission.costs, injury.costs,
transit.data, congestion.costs)
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
alt3TestTab
23000/500
npv.costs1
20*360/60
38*60/360
74*60/360
74*60/360
sum(npv.costs1$value)
sum(npv.costs2$value)
sum(npv.costs1$value)/sum(npv.costs2$value)
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
sum(npv.costs1$value)
npv.costs1$value
npv.costs1
npv.costs2
sum(npv.costs1$value)-sum(npv.costs2$value)
74*60/360
congestion.costs$annual.cost.per.commuter/
(congestion.costs$annual.hours.per.commuter*60)
12.3*0.19*1.521e6/10
npv.costs1
cf.option1$cost.congestion[1]
12.3*0.19*1.521e6/15
12.3*0.19*1.521e6/5
1.521e6
12.3*0.19*1.521e6/10*360
rep(12.3*0.19*1.521e6/10*360,20)
npv(rep(12.3*0.19*1.521e6/10*360,20),0,05)
npv(rep(12.3*0.19*1.521e6/10*360,20),0.05)
npv(rep(12.3*0.19*1.521e6/10*360,20),0.05)/1e9
1.521e6/10
1.521e6/10/1e6
cf.option1$cost.congestion[1]
cf.option1$cost.congestion[1]/1e9
npv.costs1
npv.costs2
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
npv.costs1
npv.costs2
sum(npv.costs2$value) - sum(npv.costs1$value)
sum(npv.costs1$value) -sum(npv.costs2$value)
sum(npv.costs2$value)
sum(npv.costs2$value)-54.2512433779445
alt3TestTab
alt3TestTab$VIF <- alt3TestTab$testNpvs - sum(npv.costs2$value)
alt3TestTab
alt3TestTab$VIF <- sum(npv.costs2$value) - alt3TestTab$testNpvs
alt3TestTab
alt3TestTab$VIF <- alt3TestTab$testNpvs - sum(npv.costs2$value)
alt3TestTab
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
1739/(74*60)
1.52e6*0.39
1.52e6*0.39*360
1.52e6*0.39*360/1e9
1.52e6*0.39*360/1e9
transit.data$Daily.Person.Trips.millions[3]
1.52e6
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
1739/74
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
congestion.costs$annual.cost.per.commuter/
(congestion.costs$annual.hours.per.commuter*60)
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/define_alternatives.R')
cong.cost.minute <- compute.congestion.cost.minute(congestion.costs)
total.time.person.trip <- sum(
transit.data$Daily.Person.Trips.millions[3]*1e6*
transit.data$Average.time.in.daily.person.trip.minutes[3])*360
total.time.person.trip
annual.congestion.cost <- cong.cost.minute*total.time.person.trip
annual.congestion.cost
annual.congestion.cost/1e9
injury.costs
unlist(injury.costs)
mean(unlist(injury.costs))
inj.victims <- transit.risks$victims$injuries
inj.victims
names(inj.victims) <- transit.risks$victims$type
inj.victims
inj.victims <- transit.risks$victims$injuries
names(inj.victims) <- transit.risks$victims$type
inj.costs <- unlist(injury.costs)
inj.costs <- c(inj.costs[1], inj.costs[1], inj.costs[2], inj.costs[4])
annual.cost.injury <- sum(inj.costs*inj.victims)
annual.cost.injury/sum(inj.victims)
sum(inj.victims)
annual.cost.injury
annual.cost.injury/1e9
annual.cost.injury/1e6
npv.costs1
npv.costs2
source('~/decisionchart.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
npv.costs1
926259000/4822
192090/360
66/1.52
66/(1.52*360)
