df.3
g <- ggplot()
g <- g + geom_line(data=df.3, aes(x=x, y=y))
g
rate <- seq(from=0.001,to=1, by=0.001)
df.1 <- data.frame(x=rate, y=n_72(rate))
df.2 <- data.frame(x=rate, y=n_analytical(rate))
df.3 <- df.1
df.3$y <- (df.2$y - df.1$y)
g <- ggplot()
g <- g + geom_line(data=df.3, aes(x=x, y=y))
g
rate <- seq(from=0.005,to=1, by=0.001)
df.1 <- data.frame(x=rate, y=n_72(rate))
df.2 <- data.frame(x=rate, y=n_analytical(rate))
df.3 <- df.1
df.3$y <- (df.2$y - df.1$y)
g <- ggplot()
g <- g + geom_line(data=df.3, aes(x=x, y=y))
g
g <- ggplot()
g <- g + geom_line(data=df.3, aes(x=x, y=y))
g <- g + xlab("Interest rate (% per year)")
g <- g + ylab("Difference (years)")
g
g <- ggplot()
g <- g + geom_line(data=df.3, aes(x=x, y=y))
g <- g + xlab("Interest rate (% per year)")
g <- g + ylab("Difference (years)")
# width and height are in pixels
png("myplot.png", width=400, height=400)
# Make plot
g
dev.off()
dev.off()
dev.off()
rate <- seq(from=0.005,to=1, by=0.001)
df.1 <- data.frame(x=rate, y=n_72(rate))
df.2 <- data.frame(x=rate, y=n_analytical(rate))
df.3 <- df.1
df.3$y <- (df.2$y - df.1$y)
df.3$x <- df.3$x*100
g <- ggplot()
g <- g + geom_line(data=df.3, aes(x=x, y=y))
g <- g + xlab("Interest rate (% per year)")
g <- g + ylab("Difference (years)")
# width and height are in pixels
png("myplot.png", width=400, height=400)
# Make plot
g
dev.off()
? ylim
rate <- seq(from=0.005,to=1, by=0.001)
df.1 <- data.frame(x=rate, y=n_72(rate))
df.2 <- data.frame(x=rate, y=n_analytical(rate))
df.3 <- df.1
df.3$y <- (df.2$y - df.1$y)
df.3$x <- df.3$x*100
g <- ggplot()
g <- g + geom_line(data=df.3, aes(x=x, y=y))
g <- g + xlab("Interest rate (% per year)")
g <- g + ylab("Difference (years)")
g <- g + ylim(-6,1)
# width and height are in pixels
png("myplot.png", width=400, height=400)
# Make plot
g
dev.off()
rate <- seq(from=0.005,to=1, by=0.001)
df.1 <- data.frame(x=rate, y=n_72(rate))
df.2 <- data.frame(x=rate, y=n_analytical(rate))
df.3 <- df.1
df.3$y <- (df.2$y - df.1$y)
df.3$x <- df.3$x*100
g <- ggplot()
g <- g + geom_line(data=df.3, aes(x=x, y=y))
g <- g + xlab("Interest rate (% per year)")
g <- g + ylab("Difference (years)")
g <- g + ylim(-6,1) + scale_y_continuous(breaks=seq(-6,1,1))
# width and height are in pixels
png("myplot.png", width=400, height=400)
# Make plot
g
dev.off()
rate <- seq(from=0.005,to=1, by=0.001)
df.1 <- data.frame(x=rate, y=n_72(rate))
df.2 <- data.frame(x=rate, y=n_analytical(rate))
df.3 <- df.1
df.3$y <- (df.2$y - df.1$y)
df.3$x <- df.3$x*100
g <- ggplot()
g <- g + geom_line(data=df.3, aes(x=x, y=y))
g <- g + xlab("Interest rate (% per year)")
g <- g + ylab("Difference (years)")
g <- g + scale_y_continuous(breaks=seq(-6,1,1))
# width and height are in pixels
png("myplot.png", width=400, height=400)
# Make plot
g
dev.off()
rate <- seq(from=0.005,to=1, by=0.001)
df.1 <- data.frame(x=rate, y=n_72(rate))
df.2 <- data.frame(x=rate, y=n_analytical(rate))
df.3 <- df.1
df.3$y <- (df.2$y - df.1$y)
df.3$x <- df.3$x*100
g <- ggplot()
g <- g + geom_line(data=df.3, aes(x=x, y=y))
g <- g + xlab("Interest rate (% per year)")
g <- g + ylab("Difference (years)")
g <- g + scale_y_continuous(breaks=seq(-6,1,1)) + ylim(-6,1)
# width and height are in pixels
png("myplot.png", width=400, height=400)
# Make plot
g
dev.off()
rate <- seq(from=0.005,to=1, by=0.001)
df.1 <- data.frame(x=rate, y=n_72(rate))
df.2 <- data.frame(x=rate, y=n_analytical(rate))
df.3 <- df.1
df.3$y <- (df.2$y - df.1$y)
df.3$x <- df.3$x*100
g <- ggplot()
g <- g + geom_line(data=df.3, aes(x=x, y=y))
g <- g + xlab("Interest rate (% per year)")
g <- g + ylab("Difference (years)")
g <- g + scale_y_continuous(limits=c(-6, 1) ,breaks=seq(-6,1,1))
# width and height are in pixels
png("myplot.png", width=400, height=400)
# Make plot
g
dev.off()
15000*(1.05)^5
{15,000*(1+0.05)^5}/{\sum_{n=1}^{5}(1+0.05)^n}
{15000*(1+0.05)^5}/{\sum_{n=1}^{5}(1+0.05)^n}
? rep
rep(1.05,5)^seq(1,5)
sum(rep(1.05,5)^seq(1,5))
1.05^5
15000*1.05^5/sum(rep(1.05,5)^seq(1,5))
? polyroot
polyroot(700,700,-1000)
polyroot(c(700,700,-1000))
? nov
? npv
npv <- function(cashflow, rate){
sum(cashflow^(-(1+rate)))
}
npv <- function(cashflow, rate){
n <- length(cashflow)
v.n <- 1:n
sum(cashflow^(-(1+rate)^v.n))
}
cashflow <- c(-1000,700,700)
r <- 0.26
npv(cashflow, r)
npv(cashflow, 0.01)
npv <- function(cashflow, rate){
n <- length(cashflow)
v.n <- 1:n
sum(cashflow^(-(1+rate)^v.n))
}
debugSource('~/GoogleDrive/CMU/19702/HW2/R/hw2.R')
debugSource('~/GoogleDrive/CMU/19702/HW2/R/hw2.R')
npv(cashflow, 0.01)
debugSource('~/GoogleDrive/CMU/19702/HW2/R/hw2.R')
npv(cashflow, 0.01)
cashflow^(-(1+0.05)^c(1,2,3))
-1000^(-1.05)
debugSource('~/GoogleDrive/CMU/19702/HW2/R/hw2.R')
cashflow^(-(1+0.05)^c(1,2,3))
npv(cashflow, 0.01)
source('~/GoogleDrive/CMU/19702/HW2/R/hw2.R')
npv(cashflow, 0.01)
source('~/GoogleDrive/CMU/19702/HW2/R/hw2.R')
npv(cashflow, 0.01)
npv(cashflow, 0.026)
cashflow
cashflow/((1.05)^c(0,1,2))
source('~/GoogleDrive/CMU/19702/HW2/R/hw2.R')
npv(cashflow, 0.026)
npv(cashflow, 0.26)
npv(cashflow, 0.25)
npv(cashflow, 0)
npv(cashflow, 0.05)
npv(cashflow, 0.1)
npv(cashflow, 0.2)
(1450-990)/990
(1-(1+.1)^(-2))/.1
200/1.74
library(foreign)pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)
pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
summary(pollution)
sum_pol <- summary(pollution)
sum_pol <- as.matrix(summary(pollution))
sum_pol <- as.data.frame(summary(pollution))
head(pollution)
n.var <- ncols(pollution)
n.var <- ncol(pollution)
colMeans(pollution)
sd(pollution)
pollution - values.means
values.means <- colMeans(pollution)
pollution - values.means
? sd
? apply
as.matrix(pollution)
apply(as.matrix(pollution), 1, sd)
apply(as.matrix(pollution), 2, sd)
values.means <- colMeans(pollution)values.sd <- apply(as.matrix(pollution), 2, sd)values.min <- apply(as.matrix(pollution), 2, min)values.max <- apply(as.matrix(pollution), 2, max)
values.means <- colMeans(pollution)values.sd <- apply(as.matrix(pollution), 2, sd)values.min <- apply(as.matrix(pollution), 2, min)values.max <- apply(as.matrix(pollution), 2, max)
library(foreign)pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)
library(foreign)pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)
pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
values.means <- colMeans(pollution)
values.sd <- apply(as.matrix(pollution), 2, sd)
values.min <- apply(as.matrix(pollution), 2, min)
values.max <- apply(as.matrix(pollution), 2, max)
values.means <- colMeans(pollution)values.sd <- apply(as.matrix(pollution), 2, sd)values.min <- apply(as.matrix(pollution), 2, min)values.max <- apply(as.matrix(pollution), 2, max)
source('~/GoogleDrive/CMU/19703/R/lecture_20160203.R', echo=TRUE)
library("foreign")
library("foreign")pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)
pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign)pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta")
library(foreign);pollution <- read.dta("http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta");
pollution <- read.dta('http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta');
library(foreign);pollution <- read.dta('http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta');
library(foreign)pollution <- read.dta('http://www.stat.columbia.edu/~gelman/arm/examples/pollution/pollution.dta')
? min
? geom_bar
library(ggplot2)
? geom_bar
? rep
rep(1:4, c(2,2,2,2))
rep(c("A", "B", "C", "D"), c(2, 2, 2, 2))
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
df.test
g <- tornado.plot(df.test)
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
df.test
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
? scale_fill_manual
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
debugSource('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
df.test
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
df.test
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
df.test
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
? hjust
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
g.1 <- g + geom_vline(xintercept = 10)
g.1
g.1 <- g + geom_hline(yintercept = 10)
g.1
g.1 <- g + geom_hline(yintercept = 4)
g.1
g.1 <- g + geom_vline(xintercept = 1)
g.1
g.1 <- g + geom_vline(xintercept = "A")
g.1
g.1 <- g + geom_vline(xintercept = 1)
g.1
g.1 <- g + geom_vline(xintercept = 1.5)
g.1
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
g.1 <- g.1 + xlab("Age in years") + ylab("Height in inches")
g.1
g <- tornado.plot(df.test)
g <- g + xlab("Age in years") + ylab("Height in inches")
g
g <- tornado.plot(df.test)
g <- g + xlab("Age in years") + theme(axis.title.y=element_blank())
g
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
g <- tornado.plot(df.test)
g
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/R/EngEcon.R')
parameters <- list(disc.rate = c(0.05))
parameters
parameters$num.years <- c(30)
parameters
parameters$ny.population <- 8.4e6
parameters
parameters$vsl <- 9.2e6
parameters
parameters <- list(disc.rate = c(0.05)) # discount rate (% p.y.)
parameters$num.years <- 30 # number of years of analysis
parameters$ny.population <- 8.4e6 # population
parameters$vsl <- 9.2e6 # value of statistical life ($)
parameters
injury.costs <- list()
injury.costs$occupant <- 173711
parameters <- list()
parameters$disc.rate <- 0.05 # discount rate (% p.y.)
parameters$num.years <- 30 # number of years of analysis
parameters$ny.population <- 8.4e6 # population
parameters$vsl <- 9.2e6 # value of statistical life ($)
parameters <- list()
parameters$disc.rate <- 0.05 # discount rate (% p.y.)
parameters$num.years <- 30 # number of years of analysis
parameters$ny.population <- 8.4e6 # population
parameters$vsl <- 9.2e6 # value of statistical life ($)
# source: https://wisqars.cdc.gov:8443/costT/cost_Part1_Intro.jsp
injury.costs <- list()
injury.costs$occupant <- 173711
injury.costs$motorciclyst <- 198668
injury.costs$pedalciclyst <- 187807
injury.costs$pedestrian <- 191813
injury.costs$other <- 139217
injury.costs
bus.age <- data.frame(age = c(4, 9, 20),
number = c(2313, 1296, 1437))
sum(bus.age$age*bus.age$number)
sum(bus.age$age*bus.age$number)/sum(bus.age$number)
sum(bus.age$number)
prob.bus <- bus.age$number/5046
2*prob.bus[1]+7*prob.bus[2]+15*prob.bus[3]
change.commute <- data.frame(outcome = c("MB", "LB", "LW"),
time = c(-235, -55, 30),
margin.error = c(20, 15, 10),
prob = c(0.2, 0.4, 0.4))
change.commute
# Changes in commute times with EM
change.commute <- data.frame(outcome = c("MB", "LB", "LW"),
time = c(-235, -55, 30),
margin.error = c(20, 15, 10),
prob = c(0.2, 0.4, 0.4))
change.commute
818/38
setwd("~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R")
t <- fatality.change <- read.csv(file= "../../csvfiles/probabilityLB.csv")
t <- read.csv(file= "../../csvfiles/probabilityLB.csv")
p.cond.LB <- read.csv(file= "../../csvfiles/probabilityLB.csv")
p.cond.LW <- read.csv(file= "../../csvfiles/probabilityLW.csv")
p.cond.MB <- read.csv(file= "../../csvfiles/probabilityMB.csv")
# read conditional probabilities of t (result of test) given the true outcome
# (MB, LB, LW)
p.t.given.LB <- read.csv(file= "../../csvfiles/probabilityLB.csv")
p.t.given.LW <- read.csv(file= "../../csvfiles/probabilityLW.csv")
p.t.given.MB <- read.csv(file= "../../csvfiles/probabilityMB.csv")
# size of test (% of total fleet)
size.test <- 0.4
? which
i.row <- which(p.t.given.MB$X == size.test)
# read conditional probabilities of t (result of test) given the true outcome
# (MB, LB, LW)
p.t.given.LB <- read.csv(file= "../../csvfiles/probabilityLB.csv")
p.t.given.LW <- read.csv(file= "../../csvfiles/probabilityLW.csv")
p.t.given.MB <- read.csv(file= "../../csvfiles/probabilityMB.csv")
# change names of columns
names(p.t.given.MB) <- c("size","tMB", "tLB", "tLW")
names(p.t.given.LB) <- c("size","tMB", "tLB", "tLW")
names(p.t.given.LW) <- c("size","tMB", "tLB", "tLW")
# size of test (% of total fleet)
size.test <- 0.4
# index of row of size of test
i.row <- which(p.t.given.MB$size == size.test)
change.commute <- data.frame(outcome = c("MB", "LB", "LW"),
time = c(-235, -55, 30),
margin.error = c(20, 15, 10),
prob = c(0.2, 0.4, 0.4))
p.MB <- change.commute$prob[change.commute$outcome == "MB"]
p.LB <- change.commute$prob[change.commute$outcome == "LB"]
p.LW <- change.commute$prob[change.commute$outcome == "LW"]
p.tMB <- p.t.given.MB$tMB*p.MB + p.t.given.LB$tMB*p.LB + p.t.given.LW$tM*p.LW
p.tLB <- p.t.given.MB$tLB*p.MB + p.t.given.LB$tLB*p.LB + p.t.given.LW$tLB*p.LW
p.tLW <- p.t.given.MB$tLW*p.MB + p.t.given.LB$tLW*p.LB + p.t.given.LW$tLW*p.LW
p.real.given.tMB <- data.frame(size=p.t.given.MB$size,
MB = rep(0, nrow(p.t.given.MB$size)),
LB = rep(0, nrow(p.t.given.MB$size)),
LW = rep(0, nrow(p.t.given.MB$size)))
p.real.given.tLB <- data.frame(size=p.t.given.MB$size,
MB = rep(0, nrow(p.t.given.MB$size)),
LB = rep(0, nrow(p.t.given.MB$size)),
LW = rep(0, nrow(p.t.given.MB$size)))
p.real.given.tLW <- data.frame(size=p.t.given.MB$size,
MB = rep(0, nrow(p.t.given.MB$size)),
LB = rep(0, nrow(p.t.given.MB$size)),
LW = rep(0, nrow(p.t.given.MB$size)))
nrow(p.t.given.MB$size)
nrow(p.t.given.MB)
p.real.given.tMB <- data.frame(size=p.t.given.MB$size,
MB = rep(0, nrow(p.t.given.MB)),
LB = rep(0, nrow(p.t.given.MB)),
LW = rep(0, nrow(p.t.given.MB)))
p.real.given.tLB <- data.frame(size=p.t.given.MB$size,
MB = rep(0, nrow(p.t.given.MB)),
LB = rep(0, nrow(p.t.given.MB)),
LW = rep(0, nrow(p.t.given.MB)))
p.real.given.tLW <- data.frame(size=p.t.given.MB$size,
MB = rep(0, nrow(p.t.given.MB)),
LB = rep(0, nrow(p.t.given.MB)),
LW = rep(0, nrow(p.t.given.MB)))
# computes conditional probabilities
p.real.given.tMB$MB <- p.t.given.MB$tMB * p.MB / p.tMB
p.real.given.tMB$LB <- p.t.given.LB$tMB * p.LB / p.tMB
p.real.given.tMB$LW <- p.t.given.LW$tMB * p.LW / p.tMB
p.real.given.tLB$MB <- p.t.given.MB$tLB * p.MB / p.tLB
p.real.given.tLB$LB <- p.t.given.LB$tLB * p.LB / p.tLB
p.real.given.tLB$LW <- p.t.given.LW$tLB * p.LW / p.tLB
p.real.given.tLW$MB <- p.t.given.MB$tLW * p.MB / p.tLW
p.real.given.tLW$LB <- p.t.given.LB$tLW * p.LB / p.tLW
p.real.given.tLW$LW <- p.t.given.LW$tLW * p.LW / p.tLW
p.real.given.tLB
p.real.given.tLW
p.t.given.LW
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/testeBayes.R')
a <- compute.conditional.probs(change.commute)
a
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/testeBayes.R')
a <- compute.conditional.probs(change.commute)
a
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/testeBayes.R')
a <- compute.conditional.probs(change.commute)
a
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/project_main.R')
source('~/GoogleDrive/CMU/CLASSES/19702/PROJECT/Git19702Proj1/R/conditionalProb.R')
getwd()
a <- compute.conditional.probs(change.commute)
a
